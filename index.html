<!DOCTYPE html>
<html>
<head>
  <title>Serial Scanner</title>
  <style>
    body {
      margin: 0;
      background: #121212;
      color: white;
      font-family: monospace;
      text-align: center;
    }
    canvas {
      background: #1e1e1e;
      display: block;
      margin: 0 auto;
      border: 2px solid #333;
    }
    #inputDisplay {
      margin-top: 10px;
      font-size: 1.5em;
    }
  </style>
</head>
<body>
  <h1>ðŸ”Ž Serial Scanner</h1>
  <canvas id="game" width="400" height="600"></canvas>
  <div id="inputDisplay">Type to scan: <span id="typed"></span></div>
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const typedSpan = document.getElementById("typed");

    let serials = [];
    let input = "";
    let score = 0;

    // Create random serial bar
    function createSerial() {
      const num = Math.floor(1000 + Math.random() * 9000).toString();
      const x = Math.random() * (canvas.width - 100);
      serials.push({ x, y: 0, speed: 1 + Math.random() * 2, code: num });
    }

    function drawSerials() {
      ctx.fillStyle = "white";
      ctx.font = "20px monospace";
      for (let s of serials) {
        ctx.fillStyle = "#29a329";
        ctx.fillRect(s.x, s.y, 100, 30);
        ctx.fillStyle = "white";
        ctx.fillText(s.code, s.x + 15, s.y + 22);
      }
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let s of serials) {
        s.y += s.speed;
      }

      drawSerials();
      ctx.fillStyle = "white";
      ctx.fillText("Score: " + score, 10, 20);

      // Remove offscreen serials
      serials = serials.filter(s => s.y < canvas.height);

      requestAnimationFrame(update);
    }

    function checkInput() {
      const match = serials.find(s => s.code === input);
      if (match) {
        serials = serials.filter(s => s !== match);
        score += 10;
      }
      input = "";
      typedSpan.textContent = "";
    }

    // Handle typing
    document.addEventListener("keydown", (e) => {
      if (e.key >= "0" && e.key <= "9") {
        input += e.key;
        typedSpan.textContent = input;
      }
      if (e.key === "Enter") {
        checkInput();
      }
      if (e.key === "Backspace") {
        input = input.slice(0, -1);
        typedSpan.textContent = input;
      }
    });

    // Start game loop and spawning
    setInterval(createSerial, 1500);
    update();
  </script>
</body>
</html>
